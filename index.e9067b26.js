const i=new class{constructor(){this.gridSize=4,this.grid=this.createEmptyGrid(),this.score=0}createEmptyGrid(){return Array.from({length:this.gridSize},()=>Array(this.gridSize).fill(null))}addRandomTile(){let i=[];for(let t=0;t<this.gridSize;t++)for(let e=0;e<this.gridSize;e++)null===this.grid[t][e]&&i.push({row:t,col:e});if(i.length>0){let{row:t,col:e}=i[Math.floor(Math.random()*i.length)];this.grid[t][e]=.9>Math.random()?2:4}}isFull(){for(let i=0;i<this.gridSize;i++)for(let t=0;t<this.gridSize;t++)if(null===this.grid[i][t])return!1;return!0}reset(){this.grid=this.createEmptyGrid(),this.score=0,this.addRandomTile(),this.addRandomTile()}move(i){let t=!1,e=[];for(let i=0;i<this.gridSize;i++)e[i]=Array(this.gridSize).fill(!1);let r=(i,r,s,d)=>{null===this.grid[s][d]?(this.grid[s][d]=this.grid[i][r],this.grid[i][r]=null,t=!0):this.grid[s][d]!==this.grid[i][r]||e[s][d]||(this.grid[s][d]*=2,this.score+=this.grid[s][d],this.grid[i][r]=null,e[s][d]=!0,t=!0)},s=i=>{for(let t=0;t<this.gridSize;t++)if(null!==this.grid[i][t]){let e=t;for(;e>0;)(null===this.grid[i][e-1]||this.grid[i][e-1]===this.grid[i][e])&&r(i,e,i,e-1),e--}},d=i=>{for(let t=0;t<this.gridSize;t++)if(null!==this.grid[t][i]){let e=t;for(;e>0;)(null===this.grid[e-1][i]||this.grid[e-1][i]===this.grid[e][i])&&r(e,i,e-1,i),e--}};if("up"===i)for(let i=0;i<this.gridSize;i++)d(i);else if("down"===i){for(let i=0;i<this.gridSize;i++)for(let t=this.gridSize-1;t>=0;t--)if(null!==this.grid[t][i]){let e=t;for(;e<this.gridSize-1;)(null===this.grid[e+1][i]||this.grid[e+1][i]===this.grid[e][i])&&r(e,i,e+1,i),e++}}else if("left"===i)for(let i=0;i<this.gridSize;i++)s(i);else if("right"===i){for(let i=0;i<this.gridSize;i++)for(let t=this.gridSize-1;t>=0;t--)if(null!==this.grid[i][t]){let e=t;for(;e<this.gridSize-1;)(null===this.grid[i][e+1]||this.grid[i][e+1]===this.grid[i][e])&&r(i,e,i,e+1),e++}}t&&this.addRandomTile()}hasWon(){for(let i=0;i<this.gridSize;i++)for(let t=0;t<this.gridSize;t++)if(2048===this.grid[i][t])return!0;return!1}isGameOver(){if(!this.isFull())return!1;for(let i=0;i<this.gridSize;i++)for(let t=0;t<this.gridSize;t++)if(t<this.gridSize-1&&this.grid[i][t]===this.grid[i][t+1]||i<this.gridSize-1&&this.grid[i][t]===this.grid[i+1][t])return!1;return!0}getGrid(){return this.grid}getScore(){return this.score}},t=document.querySelector(".start"),e=document.querySelector(".game-field"),r=document.querySelector(".game-score"),s=document.querySelector(".message-start"),d=document.querySelector(".message-win"),l=document.querySelector(".message-lose"),h=()=>{let t=i.getGrid();for(let i=0;i<t.length;i++)for(let r=0;r<t[i].length;r++){let s=e.rows[i].cells[r],d=t[i][r];s.textContent=d||"",s.className="field-cell",d&&s.classList.add(`field-cell--${d}`)}r.textContent=i.getScore()},o=()=>i.hasWon()?(d.classList.remove("hidden"),!0):!!i.isGameOver()&&(l.classList.remove("hidden"),!0);t.addEventListener("click",()=>{i.reset(),h(),s.classList.add("hidden"),d.classList.add("hidden"),l.classList.add("hidden"),t.textContent="Restart"}),document.addEventListener("keydown",t=>{let e=t.key;"ArrowUp"===e?i.move("up"):"ArrowDown"===e?i.move("down"):"ArrowLeft"===e?i.move("left"):"ArrowRight"===e&&i.move("right"),h(),o()});
//# sourceMappingURL=index.e9067b26.js.map
